import{j as e}from"./jsx-runtime-SKoiH9zj.js";import{r as q}from"./index-DJO9vBfz.js";import{T as V}from"./Typography-DdMJCn-_.js";import{B as S}from"./Button-CpFgCZ6s.js";import{I as D}from"./IconButton-DADAjSNQ.js";import{T as L}from"./Toast-CWcBRmbh.js";import{I as m}from"./Icon-BnrH6PuI.js";import{T as f}from"./Tooltip-jHEmaokv.js";const T=({label:v,selectedFiles:a,onFilesChange:h,disabled:y=!1,buttonDisplayType:g="attachment",iconName:B="plus_icon",maxFileSizeMB:o=5,maxFiles:s=10,buttonLabel:x="Select Files",showSelectedFiles:b=!0,buttonVariant:E="primary",deleteButton:F=!0,multiple:A=!0,addAttachmentButton:C=!0,isInfoIconRequired:I=!0,onFileListClick:_,types:u=[]})=>{const n=q.useRef(null),[c,r]=q.useState(""),k=o*1024*1024,j={image:["image/jpeg","image/png","image/gif"],video:["video/mp4","video/mpeg","video/quicktime"],audio:["audio/mpeg","audio/wav","audio/ogg"],document:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],archive:["application/zip","application/x-rar-compressed","application/x-7z-compressed"],spreadsheet:["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],excel:["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]},z=u.flatMap(t=>j[t]||[]).join(","),M=()=>{if(u.length===0)return"Any files are allowed.";const t=u.flatMap(i=>j[i]||[]).map(i=>i.split("/")[1]),l=t.pop();return e.jsxs("span",{children:[t.join(", ")," and ",l," files are allowed.",e.jsx("br",{}),"Max size: ",o," MB"]})},d=()=>{var t;r(""),(t=n.current)==null||t.click()},w=()=>{var t;if(r(""),(t=n.current)!=null&&t.files){const i=Array.from(n.current.files).filter(p=>!a.some(R=>R.name===p.name));if(i.length===0){r("This file is already selected."),n.current.value="";return}if(a.length+i.length>s){r(`You can only select up to ${s} files.`),n.current.value="";return}if(i.filter(p=>p.size>k).length>0){r(`Each file must be less than ${o} MB.`),n.current.value="";return}h([...a,...i]),n.current.value=""}},N=t=>{const l=[...a];l.splice(t,1),h(l)};return e.jsxs("div",{children:[I&&e.jsxs("div",{className:"ff-label-icon",children:[e.jsx(V,{fontWeight:"semi-bold",lineHeight:"18px",children:v}),e.jsx(f,{title:M(),placement:"bottom-start",children:e.jsx(m,{name:"info",hoverEffect:!0})})]}),(!b||a.length===0)&&(g==="attachment"?e.jsx(S,{variant:E,label:x,size:"medium",onClick:d,disabled:y}):g==="icon"?e.jsx(D,{label:x,iconName:B,onClick:d,isDisable:y}):null),e.jsx("input",{type:"file",ref:n,className:"ff-input-field",onChange:w,multiple:A,accept:z}),c&&e.jsx(L,{isOpen:!!c,variant:"info",toastTitle:"Error",toastMessage:c,zIndex:1e7}),b&&a.map((t,l)=>e.jsxs("div",{className:"ff-attachment-files",onClick:_,children:[e.jsx(V,{color:"var(--brand-color)",children:t.name}),F&&e.jsx(f,{title:"Delete",children:e.jsx(m,{name:"delete",hoverEffect:!0,color:"var(--ff-delete-button-attachment)",variant:"danger",onClick:()=>N(l)})}),l===a.length-1&&a.length<s&&C&&e.jsx(f,{title:"Add Attachment",children:e.jsx(m,{name:"add_file",hoverEffect:!0,onClick:d})})]},t.name))]})};try{T.displayName="AttachmentButton",T.__docgenInfo={description:"",displayName:"AttachmentButton",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},selectedFiles:{defaultValue:null,description:"",name:"selectedFiles",required:!0,type:{name:"File[]"}},onFilesChange:{defaultValue:null,description:"",name:"onFilesChange",required:!0,type:{name:"(files: File[]) => void"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},maxFileSizeMB:{defaultValue:{value:"5"},description:"",name:"maxFileSizeMB",required:!1,type:{name:"number"}},maxFiles:{defaultValue:{value:"10"},description:"",name:"maxFiles",required:!1,type:{name:"number"}},buttonLabel:{defaultValue:{value:"Select Files"},description:"",name:"buttonLabel",required:!1,type:{name:"string"}},showSelectedFiles:{defaultValue:{value:"true"},description:"",name:"showSelectedFiles",required:!1,type:{name:"boolean"}},buttonVariant:{defaultValue:{value:"primary"},description:"",name:"buttonVariant",required:!1,type:{name:"enum",value:[{value:'"primary"'},{value:'"secondary"'},{value:'"tertiary"'},{value:'"delete"'},{value:'"warning"'}]}},deleteButton:{defaultValue:{value:"true"},description:"",name:"deleteButton",required:!1,type:{name:"boolean"}},addAttachmentButton:{defaultValue:{value:"true"},description:"",name:"addAttachmentButton",required:!1,type:{name:"boolean"}},accept:{defaultValue:null,description:"",name:"accept",required:!1,type:{name:"string[]"}},onFileListClick:{defaultValue:null,description:"",name:"onFileListClick",required:!1,type:{name:"((event: MouseEvent<HTMLElement, MouseEvent>) => void)"}},types:{defaultValue:{value:"[]"},description:"",name:"types",required:!1,type:{name:"string[]"}},iconName:{defaultValue:{value:"plus_icon"},description:"",name:"iconName",required:!1,type:{name:"string"}},buttonDisplayType:{defaultValue:{value:"attachment"},description:"",name:"buttonDisplayType",required:!1,type:{name:"enum",value:[{value:'"attachment"'},{value:'"icon"'}]}},isInfoIconRequired:{defaultValue:{value:"true"},description:"",name:"isInfoIconRequired",required:!1,type:{name:"boolean"}},multiple:{defaultValue:{value:"true"},description:"",name:"multiple",required:!1,type:{name:"boolean"}}}}}catch{}export{T as A};
