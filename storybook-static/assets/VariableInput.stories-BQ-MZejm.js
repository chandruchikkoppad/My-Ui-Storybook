import{j as i}from"./jsx-runtime-SKoiH9zj.js";import{c as h}from"./index-NZcV-alF.js";import{r as s}from"./index-DJO9vBfz.js";import{T as R}from"./Typography-DdMJCn-_.js";const N=({type:x="url",name:b="",label:V,disabled:T=!1,required:p=!1,placeholder:A="",value:g="",error:w,className:ae="",onChange:q,onKeyDown:C,onBlur:S,onFocus:L,list:u=[],...D})=>{const[m,c]=s.useState(""),[$,P]=s.useState(0),[F,y]=s.useState(!0),[K,M]=s.useState([]),[B,E]=s.useState(!1),l=s.useRef(null),d=s.useRef([]),_=s.useRef([]);s.useEffect(()=>{g&&c(g)},[g]);const H=e=>{const t=/\$\{(\w+)\}/g,n=[];let a=0,r;for(;(r=t.exec(e))!==null;){const[o,f]=r,te=u==null?void 0:u.includes(f??"");r.index>a&&n.push({text:e.slice(a,r.index),textType:"normal"}),n.push({text:o,textType:te?"variable":"nonVariable"}),a=r.index+o.length}return a<e.length&&n.push({text:e.slice(a),textType:"normal"}),n},O=()=>{const e=H(m),t=l.current;t&&(t.innerHTML=e.map(n=>`<Typography class="${h({ff_var_red:n.textType==="nonVariable",ff_var_green:n.textType==="variable",ff_var_def_textType:n.textType!=="nonVariable"&&n.textType!=="variable"})}">${n.text}</Typography>`).join(""),U(t))},U=e=>{const t=window.getSelection(),n=document.createRange(),a=W(e);if(a.length>0){const r=a[a.length-1],f=Math.max(0,Math.min($+(F?1:-1),r.length||0));r&&n.setStart(r,f),n.collapse(!0)}else n.selectNodeContents(e),n.collapse(!1);t==null||t.removeAllRanges(),t==null||t.addRange(n),e.focus()},W=e=>{const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null);let a;for(;a=n.nextNode();)t.push(a);return t},z=e=>{const t=e.currentTarget.innerText.split(`
`).join("");c(t),d.current.push(t),_.current=[],p&&!t.trim()?e.currentTarget.classList.add("ff_required_empty"):e.currentTarget.classList.remove("ff_required_empty"),x==="url"&&new RegExp("^(https?://)?([\\w.-]+)\\.([a-zA-Z]{2,})(/([\\w.-]+|\\$\\{[\\w.-]+\\}))*/?$").test(t)?(e.currentTarget.classList.remove("ff_invalid_input"),e.currentTarget.classList.remove("ff_required_empty")):e.currentTarget.classList.add("ff_invalid_input"),q&&q(t);const n=/\$\{(\w*)$/.exec(t);if(n){const a=n[1],r=u==null?void 0:u.filter(o=>o.startsWith(a??""));M(r),E(!0)}else E(!1)},X=e=>{const t=Z();P(t),y(!0);const n=l.current&&l.current.textContent||"";if((e.key==="Backspace"||e.key==="Delete")&&(y(!1),!n.trim())){e.preventDefault(),l.current&&(l.current.textContent="",l.current.blur());return}e.key==="Enter"?(e.preventDefault(),Q(`
`)):e.ctrlKey&&e.key==="z"?(e.preventDefault(),G()):e.ctrlKey&&e.key==="y"&&(e.preventDefault(),J()),C&&C(e)},Z=()=>{const e=window.getSelection();return e&&e.rangeCount>0?e.getRangeAt(0).startOffset:0},G=()=>{d.current.length>1&&(_.current.push(d.current.pop()),c(d.current[d.current.length-1]??""),y(!1))},J=()=>{if(_.current.length>0){const e=_.current.pop();c(e),d.current.push(e),y(!0)}},Q=e=>{var a,r;const t=window.getSelection(),n=t==null?void 0:t.getRangeAt(0);if(n){n.deleteContents();const o=document.createTextNode(e);n.insertNode(o);const f=document.createElement("br");n.insertNode(f),n.setStartAfter(f),n.collapse(!0),t==null||t.removeAllRanges(),t==null||t.addRange(n),(a=l.current)==null||a.focus(),c(((r=l.current)==null?void 0:r.innerText)||"")}},Y=e=>{const t=m.replace(/\$\{\w*$/,`\${${e}`);c(t),E(!1)};s.useEffect(()=>{O()},[m]);const ee=h("ff_content_editable",{ff_placeholder:!m,ff_disabled:T,ff_required:p,ff_invalid_input:w});return i.jsxs("div",{className:"ff_variable_input_container",children:[V&&i.jsxs("label",{htmlFor:b,className:h("ff_label_container",{ff_labelDanger:w}),children:[p&&i.jsx(R,{className:"ff_required_asterisk",children:"*"}),i.jsx(R,{className:h("ff_input_label",{ff_no_hover:g,ff_disabled_label:T,ff_danger_label:w}),children:V})]}),i.jsx("div",{id:b,contentEditable:!T,ref:l,onInput:z,onKeyDown:X,onFocus:e=>{e.currentTarget.style.outline="none",L&&L(e)},onBlur:e=>{e.currentTarget.style.outline="none",S&&S(e),p&&!m.trim()?e.currentTarget.classList.add("ff_required_empty"):e.currentTarget.classList.remove("ff_required_empty")},className:ee,suppressContentEditableWarning:!0,"aria-required":p?"true":"false","data-name":b,"data-type":x,"data-placeholder":A,spellCheck:!1,...D}),B&&i.jsx("ul",{className:"ff_suggestions",children:K.map(e=>i.jsx("li",{onClick:()=>Y(e),className:"ff_suggestion_item",children:e},e))})]})};try{N.displayName="VariableInput",N.__docgenInfo={description:"",displayName:"VariableInput",props:{name:{defaultValue:{value:""},description:"Name | name of the input field",name:"name",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"Label | field label to be displayed",name:"label",required:!0,type:{name:"string"}},value:{defaultValue:{value:""},description:"value | input field value",name:"value",required:!1,type:{name:"string | null"}},type:{defaultValue:{value:"url"},description:"type to set color/style of the input field",name:"type",required:!1,type:{name:"enum",value:[{value:'"number"'},{value:'"text"'},{value:'"password"'},{value:'"email"'},{value:'"url"'},{value:'"time"'}]}},error:{defaultValue:null,description:"error | If true, error message will be displayed",name:"error",required:!1,type:{name:"boolean"}},disabled:{defaultValue:{value:"false"},description:"to disable the input field",name:"disabled",required:!1,type:{name:"boolean"}},required:{defaultValue:{value:"false"},description:"if true, input field will be mandatory",name:"required",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:{value:""},description:"placeholder for the input field",name:"placeholder",required:!1,type:{name:"string"}},className:{defaultValue:{value:""},description:"classnames to style the input field",name:"className",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"onChange, onKeyDown, onBlur, onFocus actions",name:"onChange",required:!1,type:{name:"((value: string) => void)"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"((event: KeyboardEvent<HTMLInputElement>) => void)"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"((event: FocusEvent<HTMLInputElement, Element>) => void)"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!1,type:{name:"((event: FocusEvent<HTMLInputElement, Element>) => void)"}},id:{defaultValue:null,description:"id to select the input field uniquely",name:"id",required:!1,type:{name:"string"}},list:{defaultValue:{value:"[]"},description:"list of variables",name:"list",required:!1,type:{name:"string[]"}}}}}catch{}const ie={title:"Components/VariableInput",component:N,parameters:{layout:"centered"},tags:["autodocs"]},ne={name:"input",label:"",disabled:!1,placeholder:"Enter URL",value:"",type:"url",list:["name","urlName","passwork","emailId","default","errorVar"]},v={args:{...ne,label:"Enter URL",type:"url"}};var k,I,j;v.parameters={...v.parameters,docs:{...(k=v.parameters)==null?void 0:k.docs,source:{originalSource:`{
  args: {
    ...defaultArgs,
    label: 'Enter URL',
    type: 'url'
  }
}`,...(j=(I=v.parameters)==null?void 0:I.docs)==null?void 0:j.source}}};const ue=["Default"];export{v as Default,ue as __namedExportsOrder,ie as default};
