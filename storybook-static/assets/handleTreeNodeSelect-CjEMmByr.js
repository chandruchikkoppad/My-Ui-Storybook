import{c as g}from"./checkEmpty-xi6SckPb.js";const I=(f,s,i,C)=>{if(!s)throw new Error("Key is required");const a=new Map,c=new Map,n=new Set;let l=[...f];i&&!g(i)&&(l=[i,...f]),l.forEach(e=>{a.set(e.key,e),e.parentId&&(c.has(e.parentId)||c.set(e.parentId,[]),c.get(e.parentId).push(e))});function m(e){const t=a.get(e);if(!t)return"none";const r=(t.resourceCount??0)+(t.subContainerCount??0);if(r===0)return t.selectedStatus??"none";const o=c.get(e)||[];let u=0,S=!1;for(const w of o)w.selectedStatus==="completely"?u++:w.selectedStatus==="partially"&&(S=!0);return u===r?"completely":S||u>0?"partially":"none"}function p(e,t){if(n.has(e))throw new Error(`Cycle detected at node: ${e}`);n.add(e),(c.get(e)||[]).forEach(o=>{o.selectedStatus=t,p(o.key,t)}),n.delete(e)}function h(e){if(n.has(e))throw new Error(`Cycle detected at node: ${e}`);n.add(e);const t=a.get(e);if(t&&t.parentId){const r=a.get(t.parentId);r&&(r.selectedStatus=m(r.key),h(r.key))}n.delete(e)}const d=a.get(s);return d&&(d.selectedStatus=C?"completely":"none",p(s,d.selectedStatus),h(s)),g(i)?{data:l}:{rootNode:l[0],data:l.slice(1)}};export{I as h};
