import{j as d}from"./jsx-runtime-SKoiH9zj.js";import{r}from"./index-DJO9vBfz.js";import{c as le}from"./checkEmpty-xi6SckPb.js";import{V as re}from"./VariableDropdown-DMFOrdX0.js";import{I as ie}from"./Icon-BnrH6PuI.js";import{I as oe}from"./Input-BT-svg7L.js";import{T as se}from"./Typography-DdMJCn-_.js";import{c as de}from"./index-NZcV-alF.js";import{T as ue}from"./Tooltip-jHEmaokv.js";const g=({onSelectVariable:c,dropdownPosition:h,filteredOptions:u=[],position:y="relative",width:v="300px"})=>d.jsx("div",{className:de("ff-variable-dropdown",y),style:h?{top:h.top+30,left:h.left-30,width:v}:{width:v},children:u==null?void 0:u.map(s=>d.jsx("div",{className:"ff-variable-option",onClick:()=>c(s),children:d.jsx(se,{as:"span",fontSize:14,children:s==null?void 0:s.name})},s==null?void 0:s.id))});try{g.displayName="OptionsDropdown",g.__docgenInfo={description:"",displayName:"OptionsDropdown",props:{position:{defaultValue:{value:"relative"},description:"Position whether absoloute or relative",name:"position",required:!1,type:{name:"enum",value:[{value:'"absolute"'},{value:'"relative"'}]}},width:{defaultValue:{value:"300px"},description:"Dropdown width",name:"width",required:!1,type:{name:"string"}},filteredOptions:{defaultValue:{value:"[]"},description:"chars entered to search in Input :",name:"filteredOptions",required:!1,type:{name:"dynamicObject[]"}},onSelectVariable:{defaultValue:null,description:"Function to handle click on variable",name:"onSelectVariable",required:!0,type:{name:"(variable: object) => void"}},dropdownPosition:{defaultValue:null,description:"Dropdown postion used for dropdown placement",name:"dropdownPosition",required:!1,type:{name:"dropdownPositionType"}}}}}catch{}const F=r.forwardRef(({label:c="",hashInputValue:h="",setHashInputValue:u,variableList:y=[],placeholder:v="Enter text",onChange:s,onCreateVariableClick:T,value:t="",dropdownWidth:C="inherit",isHash:p=!1,dataFiles:x=[],showAddVariableIcon:B=!0,helperText:N="",error:R,autoComplete:$="off",required:A=!1,formProps:M={},onlyDropdown:q=!1,...b},K)=>{const[z,w]=r.useState(!1),[G,W]=r.useState(!1),[U,D]=r.useState(!1),[V,H]=r.useState(null),[I,L]=r.useState(0),[Q,S]=r.useState(!1),[J,P]=r.useState(!1),[X,E]=r.useState([]),o=r.useRef(null);r.useImperativeHandle(K,()=>o.current),r.useEffect(()=>{V!==null&&o.current&&(o.current.setSelectionRange(V,V),o.current.focus())},[V]),r.useEffect(()=>{if(p?w(t.startsWith("#")):P(!(t!=null&&t.includes("$"))),t.startsWith("#")&&p){const e=t.slice(1).toLowerCase(),a=x.filter(i=>i.name.toLowerCase().includes(e));E(a),w(a.length>0)}},[t]),r.useEffect(()=>{if(!Q&&q){const e=x.filter(a=>a.toLowerCase().includes(t.toLowerCase())).map((a,i)=>({id:i+1,name:a}));E(e),w(e.length>0)}S(!1)},[t]);const j=()=>{o.current&&L(o.current.selectionStart||0)},Y=j,Z=j;r.useEffect(()=>{o.current&&L(o.current.selectionStart||0)},[t]);function ee(e,a){const i=e.lastIndexOf("$",a-1),n=e.indexOf("$",a);return i===-1&&n===-1?-1:i===-1?n:n===-1||Math.abs(a-i)<=Math.abs(n-a)?i:n}const _=e=>{if(o.current){const{selectionStart:a,selectionEnd:i}=o.current,n=`{${e.type==="LOCAL"?"LV":e.type==="GLOBAL"?"GV":e.type==="GROUP"?"SG":"PEV"}_${e.name}}`;let l;p&&t[0]==="#"||q?l=e.name+t.slice(i||1):l=t.slice(0,ee(t,I)||0)+"$"+n+t.slice(i||0),s&&s({target:{value:l}}),o.current.value=l,u==null||u(e),H((a||0)+n.length),w(!1),S(!0),W(!0)}};function ae(e,a,i){let n=!1,l="";const k=t[a-1]==="}";if(a<0||a>e.length)return{showDropdown:n,searchString:l};const m=e.lastIndexOf("$",a-1),O=e.indexOf("$",a);return m!==-1&&(a===m+1?(n=!0,l=""):(l=e.slice(m+1,O===-1?void 0:O),a>m+1&&(l=e.slice(m+1,a)),n=!0),G&&k&&(n=!1),(/[{}]/.test(l)||a===0)&&(n=!1,l=""),l&&(i.some(ne=>ne.name.toLowerCase().includes(l.toLowerCase()))||(n=!1,l=""))),{showDropdown:n,searchString:l}}const f=ae(t,I,y),te=e=>{(!e.relatedTarget||!e.relatedTarget.closest(".dropdown-container"))&&D(!1)};return d.jsxs("div",{className:"ff-add-variable-container",children:[d.jsxs("div",{className:"ff-add-variable-input",children:[d.jsx(oe,{...b,name:"add_variable",ref:o,type:"text",value:t,onChange:s,variant:"primary",label:c,placeholder:v,onClick:Y,onKeyUp:Z,onFocus:()=>D(!0),onBlur:e=>{var a;te(e),(a=b.onBlur)==null||a.call(b,e)},autoComplete:$,helperText:N,error:R,required:A,...M}),!le(t)&&!p&&J&&B&&d.jsx(ue,{title:"Add Variable",children:d.jsx(ie,{onClick:T,name:"add_variable",width:24,height:24,hoverEffect:!0})})]}),(f==null?void 0:f.showDropdown)&&U&&d.jsx(re,{position:"absolute",width:C,optionsList:y.filter(e=>e.name.toLowerCase().includes(f==null?void 0:f.searchString)),onSelectVariable:_}),z&&(p||q)&&d.jsx(g,{position:"relative",width:C,filteredOptions:X,onSelectVariable:_})]})});try{F.displayName="ConditionalDropdown",F.__docgenInfo={description:"",displayName:"ConditionalDropdown",props:{label:{defaultValue:{value:""},description:"Label for the field",name:"label",required:!1,type:{name:"string"}},hashInputValue:{defaultValue:{value:""},description:"Value in the input should stored in this state",name:"hashInputValue",required:!1,type:{name:"TestDataObject | dynamicObject"}},setHashInputValue:{defaultValue:null,description:"Function storing and updating the inputValue state",name:"setHashInputValue",required:!1,type:{name:"((value: File | dynamicObject | null) => void)"}},variableList:{defaultValue:{value:"[]"},description:"List of variables",name:"variableList",required:!1,type:{name:"dynamicObject[]"}},placeholder:{defaultValue:{value:"Enter text"},description:"Place holder for the input field",name:"placeholder",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:`Function to handle input change
@param value
@returns`,name:"onChange",required:!1,type:{name:"((event: ChangeEvent<HTMLInputElement>) => void)"}},onCreateVariableClick:{defaultValue:null,description:"Function to handle create variable icon click",name:"onCreateVariableClick",required:!1,type:{name:"(() => void)"}},dropdownWidth:{defaultValue:{value:"inherit"},description:"Width of the dropdown",name:"dropdownWidth",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"Name | name of the input field",name:"name",required:!1,type:{name:"string"}},value:{defaultValue:{value:""},description:"value | input field value",name:"value",required:!1,type:{name:"string"}},variant:{defaultValue:null,description:"variants to set color/style of the input field",name:"variant",required:!1,type:{name:"enum",value:[{value:'"primary"'},{value:'"default"'}]}},type:{defaultValue:null,description:"type to set color/style of the input field",name:"type",required:!1,type:{name:"enum",value:[{value:'"number"'},{value:'"text"'},{value:'"password"'},{value:'"email"'},{value:'"url"'},{value:'"time"'}]}},error:{defaultValue:null,description:"error | If true, error message will be displayed",name:"error",required:!1,type:{name:"boolean"}},helperText:{defaultValue:{value:""},description:"helperText | error, success, warning message to be shown",name:"helperText",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"to disable the input field",name:"disabled",required:!1,type:{name:"boolean"}},required:{defaultValue:{value:"false"},description:"if true, input field will be mandatory",name:"required",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"classnames to style the input field",name:"className",required:!1,type:{name:"string"}},noBorder:{defaultValue:null,description:"noBorder prop 'true' removes border of input",name:"noBorder",required:!1,type:{name:"boolean"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"((event: KeyboardEvent<HTMLInputElement>) => void)"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"((event: FocusEvent<HTMLInputElement, Element>) => void)"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!1,type:{name:"((event: FocusEvent<HTMLInputElement, Element>) => void)"}},id:{defaultValue:null,description:"id to select the input field uniquely",name:"id",required:!1,type:{name:"string"}},autoComplete:{defaultValue:{value:"off"},description:"if on, suggestion popup will be displayed",name:"autoComplete",required:!1,type:{name:"enum",value:[{value:'"on"'},{value:'"off"'}]}},minValue:{defaultValue:null,description:"minimum and maximum values for the number type input field and their functions",name:"minValue",required:!1,type:{name:"string"}},maxValue:{defaultValue:null,description:"",name:"maxValue",required:!1,type:{name:"string"}},transparentBackground:{defaultValue:null,description:"background of the input field prop",name:"transparentBackground",required:!1,type:{name:"boolean"}},size:{defaultValue:null,description:"size for the input field",name:"size",required:!1,type:{name:"enum",value:[{value:'"small"'},{value:'"medium"'}]}},isLabelRequired:{defaultValue:null,description:"isLabelRequired for the input field without label,showing placeholder",name:"isLabelRequired",required:!1,type:{name:"boolean"}},isHash:{defaultValue:{value:"false"},description:"If true, dropdown opens when '#' is entered at the first position.",name:"isHash",required:!1,type:{name:"boolean"}},dataFiles:{defaultValue:{value:"[]"},description:"Options for the dropdown when `isHash` is true.",name:"dataFiles",required:!1,type:{name:"dynamicObject[]"}},showAddVariableIcon:{defaultValue:{value:"true"},description:"a boolean prop to show add variable icon or not.",name:"showAddVariableIcon",required:!1,type:{name:"boolean"}},onlyDropdown:{defaultValue:{value:"false"},description:"",name:"onlyDropdown",required:!1,type:{name:"boolean"}},formProps:{defaultValue:{value:"{}"},description:"",name:"formProps",required:!1,type:{name:"Record<string, any>"}}}}}catch{}export{F as C};
