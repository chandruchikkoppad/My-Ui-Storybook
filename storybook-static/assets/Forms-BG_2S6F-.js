import{j as jt}from"./jsx-runtime-SKoiH9zj.js";import{R as m,r as yt}from"./index-DJO9vBfz.js";var me=e=>e.type==="checkbox",le=e=>e instanceof Date,K=e=>e==null;const $e=e=>typeof e=="object";var M=e=>!K(e)&&!Array.isArray(e)&&$e(e)&&!le(e),_t=e=>M(e)&&e.target?me(e.target)?e.target.checked:e.target.value:e,Wt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,gt=(e,r)=>e.has(Wt(r)),qt=e=>{const r=e.constructor&&e.constructor.prototype;return M(r)&&r.hasOwnProperty("isPrototypeOf")},He=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function P(e){let r;const t=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)r=new Date(e);else if(e instanceof Set)r=new Set(e);else if(!(He&&(e instanceof Blob||i))&&(t||M(e)))if(r=t?[]:{},!t&&!qt(e))r=e;else for(const n in e)e.hasOwnProperty(n)&&(r[n]=P(e[n]));else return e;return r}var be=e=>Array.isArray(e)?e.filter(Boolean):[],O=e=>e===void 0,c=(e,r,t)=>{if(!r||!M(e))return t;const i=be(r.split(/[,[\].]+?/)).reduce((n,l)=>K(n)?n:n[l],e);return O(i)||i===e?O(e[r])?t:e[r]:i},X=e=>typeof e=="boolean",Ke=e=>/^\w*$/.test(e),ht=e=>be(e.replace(/["|']|\]/g,"").split(/\.|\[/)),C=(e,r,t)=>{let i=-1;const n=Ke(r)?[r]:ht(r),l=n.length,d=l-1;for(;++i<l;){const y=n[i];let A=t;if(i!==d){const V=e[y];A=M(V)||Array.isArray(V)?V:isNaN(+n[i+1])?{}:[]}if(y==="__proto__"||y==="constructor"||y==="prototype")return;e[y]=A,e=e[y]}return e};const Ae={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Z={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},se={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},vt=m.createContext(null),de=()=>m.useContext(vt),$t=e=>{const{children:r,...t}=e;return m.createElement(vt.Provider,{value:t},r)};var mt=(e,r,t,i=!0)=>{const n={defaultValues:r._defaultValues};for(const l in e)Object.defineProperty(n,l,{get:()=>{const d=l;return r._proxyFormState[d]!==Z.all&&(r._proxyFormState[d]=!i||Z.all),t&&(t[d]=!0),e[d]}});return n},H=e=>M(e)&&!Object.keys(e).length,bt=(e,r,t,i)=>{t(e);const{name:n,...l}=e;return H(l)||Object.keys(l).length>=Object.keys(r).length||Object.keys(l).find(d=>r[d]===(!i||Z.all))},G=e=>Array.isArray(e)?e:[e],Ft=(e,r,t)=>!e||!r||e===r||G(e).some(i=>i&&(t?i===r:i.startsWith(r)||r.startsWith(i)));function Se(e){const r=m.useRef(e);r.current=e,m.useEffect(()=>{const t=!e.disabled&&r.current.subject&&r.current.subject.subscribe({next:r.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}function At(e){const r=de(),{control:t=r.control,disabled:i,name:n,exact:l}=e||{},[d,y]=m.useState(t._formState),A=m.useRef(!0),V=m.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),x=m.useRef(n);return x.current=n,Se({disabled:i,next:b=>A.current&&Ft(x.current,b.name,l)&&bt(b,V.current,t._updateFormState)&&y({...t._formState,...b}),subject:t._subjects.state}),m.useEffect(()=>(A.current=!0,V.current.isValid&&t._updateValid(!0),()=>{A.current=!1}),[t]),m.useMemo(()=>mt(d,t,V.current,!1),[d,t])}var re=e=>typeof e=="string",Vt=(e,r,t,i,n)=>re(e)?(i&&r.watch.add(e),c(t,e,n)):Array.isArray(e)?e.map(l=>(i&&r.watch.add(l),c(t,l))):(i&&(r.watchAll=!0),t);function xt(e){const r=de(),{control:t=r.control,name:i,defaultValue:n,disabled:l,exact:d}=e||{},y=m.useRef(i);y.current=i,Se({disabled:l,subject:t._subjects.values,next:x=>{Ft(y.current,x.name,d)&&V(P(Vt(y.current,t._names,x.values||t._formValues,!1,n)))}});const[A,V]=m.useState(t._getWatch(i,n));return m.useEffect(()=>t._removeUnmounted()),A}function pt(e){const r=de(),{name:t,disabled:i,control:n=r.control,shouldUnregister:l}=e,d=gt(n._names.array,t),y=xt({control:n,name:t,defaultValue:c(n._formValues,t,c(n._defaultValues,t,e.defaultValue)),exact:!0}),A=At({control:n,name:t,exact:!0}),V=m.useRef(n.register(t,{...e.rules,value:y,...X(e.disabled)?{disabled:e.disabled}:{}})),x=m.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!c(A.errors,t)},isDirty:{enumerable:!0,get:()=>!!c(A.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!c(A.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!c(A.validatingFields,t)},error:{enumerable:!0,get:()=>c(A.errors,t)}}),[A,t]),b=m.useMemo(()=>({name:t,value:y,...X(i)||A.disabled?{disabled:A.disabled||i}:{},onChange:R=>V.current.onChange({target:{value:_t(R),name:t},type:Ae.CHANGE}),onBlur:()=>V.current.onBlur({target:{value:c(n._formValues,t),name:t},type:Ae.BLUR}),ref:R=>{const E=c(n._fields,t);E&&R&&(E._f.ref={focus:()=>R.focus(),select:()=>R.select(),setCustomValidity:U=>R.setCustomValidity(U),reportValidity:()=>R.reportValidity()})}}),[t,n._formValues,i,A.disabled,y,n._fields]);return m.useEffect(()=>{const R=n._options.shouldUnregister||l,E=(U,I)=>{const j=c(n._fields,U);j&&j._f&&(j._f.mount=I)};if(E(t,!0),R){const U=P(c(n._options.defaultValues,t));C(n._defaultValues,t,U),O(c(n._formValues,t))&&C(n._formValues,t,U)}return!d&&n.register(t),()=>{(d?R&&!n._state.action:R)?n.unregister(t):E(t,!1)}},[t,n,d,l]),m.useEffect(()=>{n._updateDisabledField({disabled:i,fields:n._fields,name:t})},[i,t,n]),m.useMemo(()=>({field:b,formState:A,fieldState:x}),[b,A,x])}const Ht=e=>e.render(pt(e)),St=e=>{const r={};for(const t of Object.keys(e))if($e(e[t])&&e[t]!==null){const i=St(e[t]);for(const n of Object.keys(i))r[`${t}.${n}`]=i[n]}else r[t]=e[t];return r},Kt="post";function zt(e){const r=de(),[t,i]=m.useState(!1),{control:n=r.control,onSubmit:l,children:d,action:y,method:A=Kt,headers:V,encType:x,onError:b,render:R,onSuccess:E,validateStatus:U,...I}=e,j=async Q=>{let S=!1,z="";await n.handleSubmit(async J=>{const T=new FormData;let g="";try{g=JSON.stringify(J)}catch{}const h=St(n._formValues);for(const F in h)T.append(F,h[F]);if(l&&await l({data:J,event:Q,method:A,formData:T,formDataJson:g}),y)try{const F=[V&&V["Content-Type"],x].some(L=>L&&L.includes("json")),D=await fetch(String(y),{method:A,headers:{...V,...x?{"Content-Type":x}:{}},body:F?g:T});D&&(U?!U(D.status):D.status<200||D.status>=300)?(S=!0,b&&b({response:D}),z=String(D.status)):E&&E({response:D})}catch(F){S=!0,b&&b({error:F})}})(Q),S&&e.control&&(e.control._subjects.state.next({isSubmitSuccessful:!1}),e.control.setError("root.server",{type:z}))};return m.useEffect(()=>{i(!0)},[]),R?m.createElement(m.Fragment,null,R({submit:j})):m.createElement("form",{noValidate:t,action:y,method:A,encType:x,onSubmit:j,...I},d)}var wt=(e,r,t,i,n)=>r?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[i]:n||!0}}:{},ae=()=>{const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const t=(Math.random()*16+e)%16|0;return(r=="x"?t:t&3|8).toString(16)})},Ce=(e,r,t={})=>t.shouldFocus||O(t.shouldFocus)?t.focusName||`${e}.${O(t.focusIndex)?r:t.focusIndex}.`:"",ve=e=>({isOnSubmit:!e||e===Z.onSubmit,isOnBlur:e===Z.onBlur,isOnChange:e===Z.onChange,isOnAll:e===Z.all,isOnTouch:e===Z.onTouched}),je=(e,r,t)=>!t&&(r.watchAll||r.watch.has(e)||[...r.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const ce=(e,r,t,i)=>{for(const n of t||Object.keys(e)){const l=c(e,n);if(l){const{_f:d,...y}=l;if(d){if(d.refs&&d.refs[0]&&r(d.refs[0],n)&&!i)return!0;if(d.ref&&r(d.ref,d.name)&&!i)return!0;if(ce(y,r))break}else if(M(y)&&ce(y,r))break}}};var Dt=(e,r,t)=>{const i=G(c(e,t));return C(i,"root",r[t]),C(e,t,i),e},ze=e=>e.type==="file",te=e=>typeof e=="function",Ve=e=>{if(!He)return!1;const r=e?e.ownerDocument:0;return e instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},Fe=e=>re(e),Je=e=>e.type==="radio",xe=e=>e instanceof RegExp;const at={value:!1,isValid:!1},nt={value:!0,isValid:!0};var Et=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!O(e[0].attributes.value)?O(e[0].value)||e[0].value===""?nt:{value:e[0].value,isValid:!0}:nt:at}return at};const ut={isValid:!1,value:null};var kt=e=>Array.isArray(e)?e.reduce((r,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:r,ut):ut;function lt(e,r,t="validate"){if(Fe(e)||Array.isArray(e)&&e.every(Fe)||X(e)&&!e)return{type:t,message:Fe(e)?e:"",ref:r}}var oe=e=>M(e)&&!xe(e)?e:{value:e,message:""},We=async(e,r,t,i,n,l)=>{const{ref:d,refs:y,required:A,maxLength:V,minLength:x,min:b,max:R,pattern:E,validate:U,name:I,valueAsNumber:j,mount:Q}=e._f,S=c(t,I);if(!Q||r.has(I))return{};const z=y?y[0]:d,J=w=>{n&&z.reportValidity&&(z.setCustomValidity(X(w)?"":w||""),z.reportValidity())},T={},g=Je(d),h=me(d),F=g||h,D=(j||ze(d))&&O(d.value)&&O(S)||Ve(d)&&d.value===""||S===""||Array.isArray(S)&&!S.length,L=wt.bind(null,I,i,T),ue=(w,k,B,$=se.maxLength,ee=se.minLength)=>{const Y=w?k:B;T[I]={type:w?$:ee,message:Y,ref:d,...L(w?$:ee,Y)}};if(l?!Array.isArray(S)||!S.length:A&&(!F&&(D||K(S))||X(S)&&!S||h&&!Et(y).isValid||g&&!kt(y).isValid)){const{value:w,message:k}=Fe(A)?{value:!!A,message:A}:oe(A);if(w&&(T[I]={type:se.required,message:k,ref:z,...L(se.required,k)},!i))return J(k),T}if(!D&&(!K(b)||!K(R))){let w,k;const B=oe(R),$=oe(b);if(!K(S)&&!isNaN(S)){const ee=d.valueAsNumber||S&&+S;K(B.value)||(w=ee>B.value),K($.value)||(k=ee<$.value)}else{const ee=d.valueAsDate||new Date(S),Y=_e=>new Date(new Date().toDateString()+" "+_e),fe=d.type=="time",ye=d.type=="week";re(B.value)&&S&&(w=fe?Y(S)>Y(B.value):ye?S>B.value:ee>new Date(B.value)),re($.value)&&S&&(k=fe?Y(S)<Y($.value):ye?S<$.value:ee<new Date($.value))}if((w||k)&&(ue(!!w,B.message,$.message,se.max,se.min),!i))return J(T[I].message),T}if((V||x)&&!D&&(re(S)||l&&Array.isArray(S))){const w=oe(V),k=oe(x),B=!K(w.value)&&S.length>+w.value,$=!K(k.value)&&S.length<+k.value;if((B||$)&&(ue(B,w.message,k.message),!i))return J(T[I].message),T}if(E&&!D&&re(S)){const{value:w,message:k}=oe(E);if(xe(w)&&!S.match(w)&&(T[I]={type:se.pattern,message:k,ref:d,...L(se.pattern,k)},!i))return J(k),T}if(U){if(te(U)){const w=await U(S,t),k=lt(w,z);if(k&&(T[I]={...k,...L(se.validate,k.message)},!i))return J(k.message),T}else if(M(U)){let w={};for(const k in U){if(!H(w)&&!i)break;const B=lt(await U[k](S,t),z,k);B&&(w={...B,...L(k,B.message)},J(B.message),i&&(T[I]=w))}if(!H(w)&&(T[I]={ref:z,...w},!i))return T}}return J(!0),T},Te=(e,r)=>[...e,...G(r)],Oe=e=>Array.isArray(e)?e.map(()=>{}):void 0;function Re(e,r,t){return[...e.slice(0,r),...G(t),...e.slice(r)]}var Ue=(e,r,t)=>Array.isArray(e)?(O(e[t])&&(e[t]=void 0),e.splice(t,0,e.splice(r,1)[0]),e):[],Le=(e,r)=>[...G(r),...G(e)];function Jt(e,r){let t=0;const i=[...e];for(const n of r)i.splice(n-t,1),t++;return be(i).length?i:[]}var Me=(e,r)=>O(r)?[]:Jt(e,G(r).sort((t,i)=>t-i)),Ne=(e,r,t)=>{[e[r],e[t]]=[e[t],e[r]]};function Gt(e,r){const t=r.slice(0,-1).length;let i=0;for(;i<t;)e=O(e)?i++:e[r[i++]];return e}function Qt(e){for(const r in e)if(e.hasOwnProperty(r)&&!O(e[r]))return!1;return!0}function N(e,r){const t=Array.isArray(r)?r:Ke(r)?[r]:ht(r),i=t.length===1?e:Gt(e,t),n=t.length-1,l=t[n];return i&&delete i[l],n!==0&&(M(i)&&H(i)||Array.isArray(i)&&Qt(i))&&N(e,t.slice(0,-1)),e}var ot=(e,r,t)=>(e[r]=t,e);function Yt(e){const r=de(),{control:t=r.control,name:i,keyName:n="id",shouldUnregister:l,rules:d}=e,[y,A]=m.useState(t._getFieldArray(i)),V=m.useRef(t._getFieldArray(i).map(ae)),x=m.useRef(y),b=m.useRef(i),R=m.useRef(!1);b.current=i,x.current=y,t._names.array.add(i),d&&t.register(i,d),Se({next:({values:g,name:h})=>{if(h===b.current||!h){const F=c(g,b.current);Array.isArray(F)&&(A(F),V.current=F.map(ae))}},subject:t._subjects.array});const E=m.useCallback(g=>{R.current=!0,t._updateFieldArray(i,g)},[t,i]),U=(g,h)=>{const F=G(P(g)),D=Te(t._getFieldArray(i),F);t._names.focus=Ce(i,D.length-1,h),V.current=Te(V.current,F.map(ae)),E(D),A(D),t._updateFieldArray(i,D,Te,{argA:Oe(g)})},I=(g,h)=>{const F=G(P(g)),D=Le(t._getFieldArray(i),F);t._names.focus=Ce(i,0,h),V.current=Le(V.current,F.map(ae)),E(D),A(D),t._updateFieldArray(i,D,Le,{argA:Oe(g)})},j=g=>{const h=Me(t._getFieldArray(i),g);V.current=Me(V.current,g),E(h),A(h),!Array.isArray(c(t._fields,i))&&C(t._fields,i,void 0),t._updateFieldArray(i,h,Me,{argA:g})},Q=(g,h,F)=>{const D=G(P(h)),L=Re(t._getFieldArray(i),g,D);t._names.focus=Ce(i,g,F),V.current=Re(V.current,g,D.map(ae)),E(L),A(L),t._updateFieldArray(i,L,Re,{argA:g,argB:Oe(h)})},S=(g,h)=>{const F=t._getFieldArray(i);Ne(F,g,h),Ne(V.current,g,h),E(F),A(F),t._updateFieldArray(i,F,Ne,{argA:g,argB:h},!1)},z=(g,h)=>{const F=t._getFieldArray(i);Ue(F,g,h),Ue(V.current,g,h),E(F),A(F),t._updateFieldArray(i,F,Ue,{argA:g,argB:h},!1)},J=(g,h)=>{const F=P(h),D=ot(t._getFieldArray(i),g,F);V.current=[...D].map((L,ue)=>!L||ue===g?ae():V.current[ue]),E(D),A([...D]),t._updateFieldArray(i,D,ot,{argA:g,argB:F},!0,!1)},T=g=>{const h=G(P(g));V.current=h.map(ae),E([...h]),A([...h]),t._updateFieldArray(i,[...h],F=>F,{},!0,!1)};return m.useEffect(()=>{if(t._state.action=!1,je(i,t._names)&&t._subjects.state.next({...t._formState}),R.current&&(!ve(t._options.mode).isOnSubmit||t._formState.isSubmitted))if(t._options.resolver)t._executeSchema([i]).then(g=>{const h=c(g.errors,i),F=c(t._formState.errors,i);(F?!h&&F.type||h&&(F.type!==h.type||F.message!==h.message):h&&h.type)&&(h?C(t._formState.errors,i,h):N(t._formState.errors,i),t._subjects.state.next({errors:t._formState.errors}))});else{const g=c(t._fields,i);g&&g._f&&!(ve(t._options.reValidateMode).isOnSubmit&&ve(t._options.mode).isOnSubmit)&&We(g,t._names.disabled,t._formValues,t._options.criteriaMode===Z.all,t._options.shouldUseNativeValidation,!0).then(h=>!H(h)&&t._subjects.state.next({errors:Dt(t._formState.errors,h,i)}))}t._subjects.values.next({name:i,values:{...t._formValues}}),t._names.focus&&ce(t._fields,(g,h)=>{if(t._names.focus&&h.startsWith(t._names.focus)&&g.focus)return g.focus(),1}),t._names.focus="",t._updateValid(),R.current=!1},[y,i,t]),m.useEffect(()=>(!c(t._formValues,i)&&t._updateFieldArray(i),()=>{(t._options.shouldUnregister||l)&&t.unregister(i)}),[i,t,n,l]),{swap:m.useCallback(S,[E,i,t]),move:m.useCallback(z,[E,i,t]),prepend:m.useCallback(I,[E,i,t]),append:m.useCallback(U,[E,i,t]),remove:m.useCallback(j,[E,i,t]),insert:m.useCallback(Q,[E,i,t]),update:m.useCallback(J,[E,i,t]),replace:m.useCallback(T,[E,i,t]),fields:m.useMemo(()=>y.map((g,h)=>({...g,[n]:V.current[h]||ae()})),[y,n])}}var Ie=()=>{let e=[];return{get observers(){return e},next:n=>{for(const l of e)l.next&&l.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(l=>l!==n)}}),unsubscribe:()=>{e=[]}}},qe=e=>K(e)||!$e(e);function ne(e,r){if(qe(e)||qe(r))return e===r;if(le(e)&&le(r))return e.getTime()===r.getTime();const t=Object.keys(e),i=Object.keys(r);if(t.length!==i.length)return!1;for(const n of t){const l=e[n];if(!i.includes(n))return!1;if(n!=="ref"){const d=r[n];if(le(l)&&le(d)||M(l)&&M(d)||Array.isArray(l)&&Array.isArray(d)?!ne(l,d):l!==d)return!1}}return!0}var Ct=e=>e.type==="select-multiple",Xt=e=>Je(e)||me(e),Be=e=>Ve(e)&&e.isConnected,Tt=e=>{for(const r in e)if(te(e[r]))return!0;return!1};function pe(e,r={}){const t=Array.isArray(e);if(M(e)||t)for(const i in e)Array.isArray(e[i])||M(e[i])&&!Tt(e[i])?(r[i]=Array.isArray(e[i])?[]:{},pe(e[i],r[i])):K(e[i])||(r[i]=!0);return r}function Ot(e,r,t){const i=Array.isArray(e);if(M(e)||i)for(const n in e)Array.isArray(e[n])||M(e[n])&&!Tt(e[n])?O(r)||qe(t[n])?t[n]=Array.isArray(e[n])?pe(e[n],[]):{...pe(e[n])}:Ot(e[n],K(r)?{}:r[n],t[n]):t[n]=!ne(e[n],r[n]);return t}var ge=(e,r)=>Ot(e,r,pe(r)),Rt=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:i})=>O(e)?e:r?e===""?NaN:e&&+e:t&&re(e)?new Date(e):i?i(e):e;function Pe(e){const r=e.ref;return ze(r)?r.files:Je(r)?kt(e.refs).value:Ct(r)?[...r.selectedOptions].map(({value:t})=>t):me(r)?Et(e.refs).value:Rt(O(r.value)?e.ref.value:r.value,e)}var Zt=(e,r,t,i)=>{const n={};for(const l of e){const d=c(r,l);d&&C(n,l,d._f)}return{criteriaMode:t,names:[...e],fields:n,shouldUseNativeValidation:i}},he=e=>O(e)?e:xe(e)?e.source:M(e)?xe(e.value)?e.value.source:e.value:e;const ct="AsyncFunction";var er=e=>!!e&&!!e.validate&&!!(te(e.validate)&&e.validate.constructor.name===ct||M(e.validate)&&Object.values(e.validate).find(r=>r.constructor.name===ct)),tr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function dt(e,r,t){const i=c(e,t);if(i||Ke(t))return{error:i,name:t};const n=t.split(".");for(;n.length;){const l=n.join("."),d=c(r,l),y=c(e,l);if(d&&!Array.isArray(d)&&t!==l)return{name:t};if(y&&y.type)return{name:l,error:y};n.pop()}return{name:t}}var rr=(e,r,t,i,n)=>n.isOnAll?!1:!t&&n.isOnTouch?!(r||e):(t?i.isOnBlur:n.isOnBlur)?!e:(t?i.isOnChange:n.isOnChange)?e:!0,sr=(e,r)=>!be(c(e,r)).length&&N(e,r);const ir={mode:Z.onSubmit,reValidateMode:Z.onChange,shouldFocusError:!0};function ar(e={}){let r={...ir,...e},t={submitCount:0,isDirty:!1,isLoading:te(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},i={},n=M(r.defaultValues)||M(r.values)?P(r.defaultValues||r.values)||{}:{},l=r.shouldUnregister?{}:P(n),d={action:!1,mount:!1,watch:!1},y={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},A,V=0;const x={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},b={values:Ie(),array:Ie(),state:Ie()},R=ve(r.mode),E=ve(r.reValidateMode),U=r.criteriaMode===Z.all,I=s=>a=>{clearTimeout(V),V=setTimeout(s,a)},j=async s=>{if(!r.disabled&&(x.isValid||s)){const a=r.resolver?H((await F()).errors):await L(i,!0);a!==t.isValid&&b.state.next({isValid:a})}},Q=(s,a)=>{!r.disabled&&(x.isValidating||x.validatingFields)&&((s||Array.from(y.mount)).forEach(u=>{u&&(a?C(t.validatingFields,u,a):N(t.validatingFields,u))}),b.state.next({validatingFields:t.validatingFields,isValidating:!H(t.validatingFields)}))},S=(s,a=[],u,_,f=!0,o=!0)=>{if(_&&u&&!r.disabled){if(d.action=!0,o&&Array.isArray(c(i,s))){const v=u(c(i,s),_.argA,_.argB);f&&C(i,s,v)}if(o&&Array.isArray(c(t.errors,s))){const v=u(c(t.errors,s),_.argA,_.argB);f&&C(t.errors,s,v),sr(t.errors,s)}if(x.touchedFields&&o&&Array.isArray(c(t.touchedFields,s))){const v=u(c(t.touchedFields,s),_.argA,_.argB);f&&C(t.touchedFields,s,v)}x.dirtyFields&&(t.dirtyFields=ge(n,l)),b.state.next({name:s,isDirty:w(s,a),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else C(l,s,a)},z=(s,a)=>{C(t.errors,s,a),b.state.next({errors:t.errors})},J=s=>{t.errors=s,b.state.next({errors:t.errors,isValid:!1})},T=(s,a,u,_)=>{const f=c(i,s);if(f){const o=c(l,s,O(u)?c(n,s):u);O(o)||_&&_.defaultChecked||a?C(l,s,a?o:Pe(f._f)):$(s,o),d.mount&&j()}},g=(s,a,u,_,f)=>{let o=!1,v=!1;const p={name:s};if(!r.disabled){const W=!!(c(i,s)&&c(i,s)._f&&c(i,s)._f.disabled);if(!u||_){x.isDirty&&(v=t.isDirty,t.isDirty=p.isDirty=w(),o=v!==p.isDirty);const q=W||ne(c(n,s),a);v=!!(!W&&c(t.dirtyFields,s)),q||W?N(t.dirtyFields,s):C(t.dirtyFields,s,!0),p.dirtyFields=t.dirtyFields,o=o||x.dirtyFields&&v!==!q}if(u){const q=c(t.touchedFields,s);q||(C(t.touchedFields,s,u),p.touchedFields=t.touchedFields,o=o||x.touchedFields&&q!==u)}o&&f&&b.state.next(p)}return o?p:{}},h=(s,a,u,_)=>{const f=c(t.errors,s),o=x.isValid&&X(a)&&t.isValid!==a;if(r.delayError&&u?(A=I(()=>z(s,u)),A(r.delayError)):(clearTimeout(V),A=null,u?C(t.errors,s,u):N(t.errors,s)),(u?!ne(f,u):f)||!H(_)||o){const v={..._,...o&&X(a)?{isValid:a}:{},errors:t.errors,name:s};t={...t,...v},b.state.next(v)}},F=async s=>{Q(s,!0);const a=await r.resolver(l,r.context,Zt(s||y.mount,i,r.criteriaMode,r.shouldUseNativeValidation));return Q(s),a},D=async s=>{const{errors:a}=await F(s);if(s)for(const u of s){const _=c(a,u);_?C(t.errors,u,_):N(t.errors,u)}else t.errors=a;return a},L=async(s,a,u={valid:!0})=>{for(const _ in s){const f=s[_];if(f){const{_f:o,...v}=f;if(o){const p=y.array.has(o.name),W=f._f&&er(f._f);W&&x.validatingFields&&Q([_],!0);const q=await We(f,y.disabled,l,U,r.shouldUseNativeValidation&&!a,p);if(W&&x.validatingFields&&Q([_]),q[o.name]&&(u.valid=!1,a))break;!a&&(c(q,o.name)?p?Dt(t.errors,q,o.name):C(t.errors,o.name,q[o.name]):N(t.errors,o.name))}!H(v)&&await L(v,a,u)}}return u.valid},ue=()=>{for(const s of y.unMount){const a=c(i,s);a&&(a._f.refs?a._f.refs.every(u=>!Be(u)):!Be(a._f.ref))&&we(s)}y.unMount=new Set},w=(s,a)=>!r.disabled&&(s&&a&&C(l,s,a),!ne(Ge(),n)),k=(s,a,u)=>Vt(s,y,{...d.mount?l:O(a)?n:re(s)?{[s]:a}:a},u,a),B=s=>be(c(d.mount?l:n,s,r.shouldUnregister?c(n,s,[]):[])),$=(s,a,u={})=>{const _=c(i,s);let f=a;if(_){const o=_._f;o&&(!o.disabled&&C(l,s,Rt(a,o)),f=Ve(o.ref)&&K(a)?"":a,Ct(o.ref)?[...o.ref.options].forEach(v=>v.selected=f.includes(v.value)):o.refs?me(o.ref)?o.refs.length>1?o.refs.forEach(v=>(!v.defaultChecked||!v.disabled)&&(v.checked=Array.isArray(f)?!!f.find(p=>p===v.value):f===v.value)):o.refs[0]&&(o.refs[0].checked=!!f):o.refs.forEach(v=>v.checked=v.value===f):ze(o.ref)?o.ref.value="":(o.ref.value=f,o.ref.type||b.values.next({name:s,values:{...l}})))}(u.shouldDirty||u.shouldTouch)&&g(s,f,u.shouldTouch,u.shouldDirty,!0),u.shouldValidate&&_e(s)},ee=(s,a,u)=>{for(const _ in a){const f=a[_],o=`${s}.${_}`,v=c(i,o);(y.array.has(s)||M(f)||v&&!v._f)&&!le(f)?ee(o,f,u):$(o,f,u)}},Y=(s,a,u={})=>{const _=c(i,s),f=y.array.has(s),o=P(a);C(l,s,o),f?(b.array.next({name:s,values:{...l}}),(x.isDirty||x.dirtyFields)&&u.shouldDirty&&b.state.next({name:s,dirtyFields:ge(n,l),isDirty:w(s,o)})):_&&!_._f&&!K(o)?ee(s,o,u):$(s,o,u),je(s,y)&&b.state.next({...t}),b.values.next({name:d.mount?s:void 0,values:{...l}})},fe=async s=>{d.mount=!0;const a=s.target;let u=a.name,_=!0;const f=c(i,u),o=()=>a.type?Pe(f._f):_t(s),v=p=>{_=Number.isNaN(p)||le(p)&&isNaN(p.getTime())||ne(p,c(l,u,p))};if(f){let p,W;const q=o(),ie=s.type===Ae.BLUR||s.type===Ae.FOCUS_OUT,It=!tr(f._f)&&!r.resolver&&!c(t.errors,u)&&!f._f.deps||rr(ie,c(t.touchedFields,u),t.isSubmitted,E,R),Ee=je(u,y,ie);C(l,u,q),ie?(f._f.onBlur&&f._f.onBlur(s),A&&A(0)):f._f.onChange&&f._f.onChange(s);const ke=g(u,q,ie,!1),Bt=!H(ke)||Ee;if(!ie&&b.values.next({name:u,type:s.type,values:{...l}}),It)return x.isValid&&(r.mode==="onBlur"&&ie?j():ie||j()),Bt&&b.state.next({name:u,...Ee?{}:ke});if(!ie&&Ee&&b.state.next({...t}),r.resolver){const{errors:st}=await F([u]);if(v(q),_){const Pt=dt(t.errors,i,u),it=dt(st,i,Pt.name||u);p=it.error,u=it.name,W=H(st)}}else Q([u],!0),p=(await We(f,y.disabled,l,U,r.shouldUseNativeValidation))[u],Q([u]),v(q),_&&(p?W=!1:x.isValid&&(W=await L(i,!0)));_&&(f._f.deps&&_e(f._f.deps),h(u,W,p,ke))}},ye=(s,a)=>{if(c(t.errors,a)&&s.focus)return s.focus(),1},_e=async(s,a={})=>{let u,_;const f=G(s);if(r.resolver){const o=await D(O(s)?s:f);u=H(o),_=s?!f.some(v=>c(o,v)):u}else s?(_=(await Promise.all(f.map(async o=>{const v=c(i,o);return await L(v&&v._f?{[o]:v}:v)}))).every(Boolean),!(!_&&!t.isValid)&&j()):_=u=await L(i);return b.state.next({...!re(s)||x.isValid&&u!==t.isValid?{}:{name:s},...r.resolver||!s?{isValid:u}:{},errors:t.errors}),a.shouldFocus&&!_&&ce(i,ye,s?f:y.mount),_},Ge=s=>{const a={...d.mount?l:n};return O(s)?a:re(s)?c(a,s):s.map(u=>c(a,u))},Qe=(s,a)=>({invalid:!!c((a||t).errors,s),isDirty:!!c((a||t).dirtyFields,s),error:c((a||t).errors,s),isValidating:!!c(t.validatingFields,s),isTouched:!!c((a||t).touchedFields,s)}),Ut=s=>{s&&G(s).forEach(a=>N(t.errors,a)),b.state.next({errors:s?t.errors:{}})},Ye=(s,a,u)=>{const _=(c(i,s,{_f:{}})._f||{}).ref,f=c(t.errors,s)||{},{ref:o,message:v,type:p,...W}=f;C(t.errors,s,{...W,...a,ref:_}),b.state.next({name:s,errors:t.errors,isValid:!1}),u&&u.shouldFocus&&_&&_.focus&&_.focus()},Lt=(s,a)=>te(s)?b.values.subscribe({next:u=>s(k(void 0,a),u)}):k(s,a,!0),we=(s,a={})=>{for(const u of s?G(s):y.mount)y.mount.delete(u),y.array.delete(u),a.keepValue||(N(i,u),N(l,u)),!a.keepError&&N(t.errors,u),!a.keepDirty&&N(t.dirtyFields,u),!a.keepTouched&&N(t.touchedFields,u),!a.keepIsValidating&&N(t.validatingFields,u),!r.shouldUnregister&&!a.keepDefaultValue&&N(n,u);b.values.next({values:{...l}}),b.state.next({...t,...a.keepDirty?{isDirty:w()}:{}}),!a.keepIsValid&&j()},Xe=({disabled:s,name:a,field:u,fields:_})=>{(X(s)&&d.mount||s||y.disabled.has(a))&&(s?y.disabled.add(a):y.disabled.delete(a),g(a,Pe(u?u._f:c(_,a)._f),!1,!1,!0))},De=(s,a={})=>{let u=c(i,s);const _=X(a.disabled)||X(r.disabled);return C(i,s,{...u||{},_f:{...u&&u._f?u._f:{ref:{name:s}},name:s,mount:!0,...a}}),y.mount.add(s),u?Xe({field:u,disabled:X(a.disabled)?a.disabled:r.disabled,name:s}):T(s,!0,a.value),{..._?{disabled:a.disabled||r.disabled}:{},...r.progressive?{required:!!a.required,min:he(a.min),max:he(a.max),minLength:he(a.minLength),maxLength:he(a.maxLength),pattern:he(a.pattern)}:{},name:s,onChange:fe,onBlur:fe,ref:f=>{if(f){De(s,a),u=c(i,s);const o=O(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,v=Xt(o),p=u._f.refs||[];if(v?p.find(W=>W===o):o===u._f.ref)return;C(i,s,{_f:{...u._f,...v?{refs:[...p.filter(Be),o,...Array.isArray(c(n,s))?[{}]:[]],ref:{type:o.type,name:s}}:{ref:o}}}),T(s,!1,void 0,o)}else u=c(i,s,{}),u._f&&(u._f.mount=!1),(r.shouldUnregister||a.shouldUnregister)&&!(gt(y.array,s)&&d.action)&&y.unMount.add(s)}}},Ze=()=>r.shouldFocusError&&ce(i,ye,y.mount),Mt=s=>{X(s)&&(b.state.next({disabled:s}),ce(i,(a,u)=>{const _=c(i,u);_&&(a.disabled=_._f.disabled||s,Array.isArray(_._f.refs)&&_._f.refs.forEach(f=>{f.disabled=_._f.disabled||s}))},0,!1))},et=(s,a)=>async u=>{let _;u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist());let f=P(l);if(y.disabled.size)for(const o of y.disabled)C(f,o,void 0);if(b.state.next({isSubmitting:!0}),r.resolver){const{errors:o,values:v}=await F();t.errors=o,f=v}else await L(i);if(N(t.errors,"root"),H(t.errors)){b.state.next({errors:{}});try{await s(f,u)}catch(o){_=o}}else a&&await a({...t.errors},u),Ze(),setTimeout(Ze);if(b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:H(t.errors)&&!_,submitCount:t.submitCount+1,errors:t.errors}),_)throw _},Nt=(s,a={})=>{c(i,s)&&(O(a.defaultValue)?Y(s,P(c(n,s))):(Y(s,a.defaultValue),C(n,s,P(a.defaultValue))),a.keepTouched||N(t.touchedFields,s),a.keepDirty||(N(t.dirtyFields,s),t.isDirty=a.defaultValue?w(s,P(c(n,s))):w()),a.keepError||(N(t.errors,s),x.isValid&&j()),b.state.next({...t}))},tt=(s,a={})=>{const u=s?P(s):n,_=P(u),f=H(s),o=f?n:_;if(a.keepDefaultValues||(n=u),!a.keepValues){if(a.keepDirtyValues){const v=new Set([...y.mount,...Object.keys(ge(n,l))]);for(const p of Array.from(v))c(t.dirtyFields,p)?C(o,p,c(l,p)):Y(p,c(o,p))}else{if(He&&O(s))for(const v of y.mount){const p=c(i,v);if(p&&p._f){const W=Array.isArray(p._f.refs)?p._f.refs[0]:p._f.ref;if(Ve(W)){const q=W.closest("form");if(q){q.reset();break}}}}i={}}l=r.shouldUnregister?a.keepDefaultValues?P(n):{}:P(o),b.array.next({values:{...o}}),b.values.next({values:{...o}})}y={mount:a.keepDirtyValues?y.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},d.mount=!x.isValid||!!a.keepIsValid||!!a.keepDirtyValues,d.watch=!!r.shouldUnregister,b.state.next({submitCount:a.keepSubmitCount?t.submitCount:0,isDirty:f?!1:a.keepDirty?t.isDirty:!!(a.keepDefaultValues&&!ne(s,n)),isSubmitted:a.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:f?{}:a.keepDirtyValues?a.keepDefaultValues&&l?ge(n,l):t.dirtyFields:a.keepDefaultValues&&s?ge(n,s):a.keepDirty?t.dirtyFields:{},touchedFields:a.keepTouched?t.touchedFields:{},errors:a.keepErrors?t.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},rt=(s,a)=>tt(te(s)?s(l):s,a);return{control:{register:De,unregister:we,getFieldState:Qe,handleSubmit:et,setError:Ye,_executeSchema:F,_getWatch:k,_getDirty:w,_updateValid:j,_removeUnmounted:ue,_updateFieldArray:S,_updateDisabledField:Xe,_getFieldArray:B,_reset:tt,_resetDefaultValues:()=>te(r.defaultValues)&&r.defaultValues().then(s=>{rt(s,r.resetOptions),b.state.next({isLoading:!1})}),_updateFormState:s=>{t={...t,...s}},_disableForm:Mt,_subjects:b,_proxyFormState:x,_setErrors:J,get _fields(){return i},get _formValues(){return l},get _state(){return d},set _state(s){d=s},get _defaultValues(){return n},get _names(){return y},set _names(s){y=s},get _formState(){return t},set _formState(s){t=s},get _options(){return r},set _options(s){r={...r,...s}}},trigger:_e,register:De,handleSubmit:et,watch:Lt,setValue:Y,getValues:Ge,reset:rt,resetField:Nt,clearErrors:Ut,unregister:we,setError:Ye,setFocus:(s,a={})=>{const u=c(i,s),_=u&&u._f;if(_){const f=_.refs?_.refs[0]:_.ref;f.focus&&(f.focus(),a.shouldSelect&&te(f.select)&&f.select())}},getFieldState:Qe}}function nr(e={}){const r=m.useRef(void 0),t=m.useRef(void 0),[i,n]=m.useState({isDirty:!1,isValidating:!1,isLoading:te(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:te(e.defaultValues)?void 0:e.defaultValues});r.current||(r.current={...ar(e),formState:i});const l=r.current.control;return l._options=e,Se({subject:l._subjects.state,next:d=>{bt(d,l._proxyFormState,l._updateFormState,!0)&&n({...l._formState})}}),m.useEffect(()=>l._disableForm(e.disabled),[l,e.disabled]),m.useEffect(()=>{if(l._proxyFormState.isDirty){const d=l._getDirty();d!==i.isDirty&&l._subjects.state.next({isDirty:d})}},[l,i.isDirty]),m.useEffect(()=>{e.values&&!ne(e.values,t.current)?(l._reset(e.values,l._options.resetOptions),t.current=e.values,n(d=>({...d}))):l._resetDefaultValues()},[e.values,l]),m.useEffect(()=>{e.errors&&l._setErrors(e.errors)},[e.errors,l]),m.useEffect(()=>{l._state.mount||(l._updateValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),m.useEffect(()=>{e.shouldUnregister&&l._subjects.values.next({values:l._getWatch()})},[e.shouldUnregister,l]),r.current.formState=mt(i,l),r.current}const ft=Object.freeze(Object.defineProperty({__proto__:null,Controller:Ht,Form:zt,FormProvider:$t,appendErrors:wt,get:c,set:C,useController:pt,useFieldArray:Yt,useForm:nr,useFormContext:de,useFormState:At,useWatch:xt},Symbol.toStringTag,{value:"Module"})),ur=({onSubmit:e,children:r,id:t,...i},n)=>{const l=ft.useForm(i),{handleSubmit:d}=l,y={...l,Form:ft};return yt.useImperativeHandle(n,()=>({submit:d(e),...y})),jt.jsx("form",{id:t,onSubmit:d(e),children:r(y)})},yr=yt.forwardRef(ur);export{yr as F};
