import{j as r}from"./jsx-runtime-SKoiH9zj.js";import{r as W}from"./index-DJO9vBfz.js";const M=(c,l,a,f,d)=>{const C=c+a*Math.cos(f),h=l+a*Math.sin(f),n=c+a*Math.cos(d),m=l+a*Math.sin(d),s=d-f>Math.PI?1:0;return`M ${C} ${h} A ${a} ${a} 0 ${s} 1 ${n} ${m}`},X=()=>({colorMapping:{passed:"var(--status-success-text-color)",failed:"var(--status-rejected-text-color)",warning:"var(--status-warning-text-color)",skipped:"var(--status-skipped-text-color)",default:"var(--brand-color)"},hoverMapping:{passed:"var(--status-success-bg-color)",failed:"var(--status-rejected-bg-color)",warning:"var(--status-warning-bg-color)",skipped:"var(--status-skipped-bg-color)",default:"var(--status-percentage-growth-bg-color)"}}),A=({radius:c=60,lineWidth:l=15,resultStats:a=[],gapAngle:f=.06,legendDetailsType:d="",isLegendDetails:C=!0,totalCount:h})=>{var I,b,D;const[n,m]=W.useState(null),{colorMapping:s,hoverMapping:_}=X(),g=a==null?void 0:a.filter(({count:e})=>e>0),N=["passed","failed","warning","skipped"],F=f*g.length;let $=2*Math.PI-F,x=-Math.PI/2;const E=1/100*(2*Math.PI);g.forEach(({count:e})=>{const t=e/h,i=Math.max(t*(2*Math.PI),E);$-=i});const P=e=>m(e),k=()=>m(null),L=4,v=(c+l)*2+L*2,R=(e,t,i)=>{var T;const o=(T=e==null?void 0:e.status)==null?void 0:T.toLowerCase(),p=g.length===1,w=p?M(0,0,c,0,2*Math.PI):M(0,0,c,x,t),u=c+l-1,U=p?M(0,0,u,0,2*Math.PI):M(0,0,u,x,t);return x=t+f,r.jsxs("g",{children:[r.jsx("path",{d:w,fill:"none",stroke:s[o],strokeWidth:l,onMouseEnter:()=>P(o),onMouseLeave:k,strokeOpacity:n===null||n===o?.8:.3}),n===o&&r.jsx("path",{d:U,fill:"none",stroke:s[o],strokeWidth:4,strokeOpacity:.3})]},i)},y=e=>{var i,o,p;const t=a==null?void 0:a.find(w=>{var u;return((u=w.status)==null?void 0:u.toLowerCase())===(e==null?void 0:e.toLowerCase())});return r.jsxs("div",{className:`ff-status-item ${n===null||n===e?"ff-highlighted":"ff-fade"}`,onMouseEnter:()=>P(e),onMouseLeave:k,children:[r.jsxs("div",{className:"ff-status-label",children:[r.jsx("div",{className:"ff-status-color",style:{backgroundColor:s[e]}}),r.jsx("div",{className:"ff-status-text",children:((i=e==null?void 0:e.charAt(0))==null?void 0:i.toUpperCase())+((o=e==null?void 0:e.slice(1))==null?void 0:o.toLowerCase())})]}),r.jsxs("div",{className:"ff-status-details",children:[r.jsxs("div",{className:"ff-status-details-script-count",children:[(t==null?void 0:t.count)||0,r.jsx("span",{children:d})]}),r.jsxs("div",{className:"ff-status-details-script-percentage",children:["(",((p=t==null?void 0:t.percentage)==null?void 0:p.toFixed(2))||0,"%)"]})]})]},e)};return r.jsxs("div",{className:"ff-donut-chart-section",children:[r.jsx("div",{className:"ff-donut-chart-svg-container",children:r.jsx("svg",{width:v,height:v,viewBox:`0 0 ${v} ${v}`,children:r.jsxs("g",{transform:`translate(${c+l+L}, ${c+l+L})`,children:[g==null?void 0:g.map((e,t)=>{const i=e.count/h;let o=Math.max(i*(2*Math.PI),E);o+=$*i;const p=x+o;return R(e,p,t)}),r.jsx("text",{x:"0",y:"-18",textAnchor:"middle",fill:s.default,children:n?n==null?void 0:n.toUpperCase():"TOTAL"}),r.jsx("text",{x:"0",y:"5",textAnchor:"middle",fill:s.skipped,children:n?`${(I=a==null?void 0:a.find(e=>{var t;return((t=e==null?void 0:e.status)==null?void 0:t.toLowerCase())===n}))==null?void 0:I.count} ${d}`:`${h} ${d}`}),r.jsx("rect",{x:-17,y:14,width:34,height:18,fill:n?_[n==null?void 0:n.toLowerCase()]:_.default,rx:"5",ry:"5"}),r.jsx("text",{x:"0",y:"26",textAnchor:"middle",fill:n?s[n==null?void 0:n.toLowerCase()]:s.default,children:n?`${(D=((b=a==null?void 0:a.find(e=>{var t;return((t=e==null?void 0:e.status)==null?void 0:t.toLowerCase())===n}))==null?void 0:b.percentage)||0)==null?void 0:D.toFixed(2)}%`:"100%"})]})})}),C&&r.jsx("div",{className:"ff-status-container",children:N==null?void 0:N.map(e=>y(e))})]})};try{A.displayName="DonutChart",A.__docgenInfo={description:"",displayName:"DonutChart",props:{radius:{defaultValue:{value:"60"},description:"",name:"radius",required:!1,type:{name:"number"}},lineWidth:{defaultValue:{value:"15"},description:"",name:"lineWidth",required:!1,type:{name:"number"}},resultStats:{defaultValue:{value:"[]"},description:"",name:"resultStats",required:!1,type:{name:"resultStats[]"}},legendDetailsType:{defaultValue:{value:""},description:"",name:"legendDetailsType",required:!1,type:{name:"string"}},isLegendDetails:{defaultValue:{value:"true"},description:"",name:"isLegendDetails",required:!1,type:{name:"boolean"}},gapAngle:{defaultValue:{value:"0.06"},description:"",name:"gapAngle",required:!1,type:{name:"number"}},totalCount:{defaultValue:null,description:"",name:"totalCount",required:!0,type:{name:"number"}}}}}catch{}const H={title:"Components/DonutChart",component:A,parameters:{layout:"centered"},tags:["autodocs"]},j={args:{radius:70,lineWidth:15,legendDetailsType:"Scripts",isLegendDetails:!0,totalCount:500,resultStats:[{status:"passed",percentage:50,count:250},{status:"failed",percentage:20,count:100},{status:"warning",percentage:20,count:100},{status:"skipped",percentage:10,count:50}],gapAngle:.06}};var G,q,O;j.parameters={...j.parameters,docs:{...(G=j.parameters)==null?void 0:G.docs,source:{originalSource:`{
  args: {
    radius: 70,
    lineWidth: 15,
    legendDetailsType: 'Scripts',
    isLegendDetails: true,
    totalCount: 500,
    resultStats: [{
      status: 'passed',
      percentage: 50,
      count: 250
    }, {
      status: 'failed',
      percentage: 20,
      count: 100
    }, {
      status: 'warning',
      percentage: 20,
      count: 100
    }, {
      status: 'skipped',
      percentage: 10,
      count: 50
    }],
    gapAngle: 0.06
  }
}`,...(O=(q=j.parameters)==null?void 0:q.docs)==null?void 0:O.source}}};const J=["Default"];export{j as Default,J as __namedExportsOrder,H as default};
